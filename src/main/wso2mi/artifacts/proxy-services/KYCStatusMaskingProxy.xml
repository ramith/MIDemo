<proxy xmlns="http://ws.apache.org/ns/synapse" name="KYCStatusMaskingProxy" startOnLoad="true" transports="http">
    <target>
        <inSequence>
			<log category="INFO" level="full"/>
			<log category="INFO" level="full"/>
            <property name="endpointUrl" expression="get-property('system', 'CUSTOMER_API_ENDPOINT')" scope="default" type="STRING"/>
            <log category="INFO" level="full">
                <property expression="get-property('endpointUrl')" name="endpointUrl"/>
			</log>
            <send>
                <endpoint>
                    <http method="get" uri-template="${endpointUrl}"/>
				</endpoint>
			</send>
		</inSequence>
        <outSequence>
            <property name="modifiedKycStatus" value="xxxxxx" scope="default" type="STRING"/>
            <enrich>
                <source clone="true" property="modifiedKycStatus" type="property"/>
                <target action="replace" xpath="json-eval($.kycStatus)"/>
			</enrich>
            <log category="INFO" level="full"/>
            <send/>
		</outSequence>
    </target>
</proxy>
